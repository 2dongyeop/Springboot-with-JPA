# 도메인 분석 설계

## 💡 요구사항 분석
<img src="https://github.com/2dongyeop/Springboot-with-JPA/blob/dongyeop_analyze-requirements/dongyeop/image/1.png" width = 500/>

- 회원, 주문, 상품의 관계
    - 회원은 여러 주문을 할 수 있다.
    - 한 주문에는 여러 상품이 들어갈 수 있다. → 다대다 관계

<br/>

<br/>

> 이러한 ***다대다 관계는 관계형 데이터베이스는 물론이고 엔티티에서도 거의 사용하지 않는다!*** 
>
> 따라서 주문상품이라는 엔티티를 추가해서 다대다 관계를 일대다, 다대일 관계로 풀어내자!

<br/>

<br/>

### 💡 외래 키가 있는 곳을 연관관계의 주인으로 정해라.
> 연관관계의 주인은 단순히 외래 키를 누가 관리하냐의 문제이지 비즈니스상 우위에 있다고 주인으로 정하면 안된다!
>
> 예를 들어서 자동차와 바퀴가 있으면, 일대다 관계에서 항상 다쪽에 외래 키가 있으므로 외래 키가 있는 바퀴를 연관관계의 주인으로 정하면 된다. 
>
> 물론 자동차를 연관관계의 주인으로 정하는 것이 불가능 한 것은 아니지만, 자동차를 연관관계의 주인으로 정하면 자동차가 관리하지 않는 바퀴 테이블의 외래 키 값이 업데이트 되므로 관리와 유지보수가 어렵고, 추가적으로 별도의 업데이트 쿼리가 발생하는 성능 문제도 있다.

<br/>

<br/>
